{% load static %}

{% block extrahead %}
<link rel="stylesheet" href="{% static 'popup_modal.css' %}">
<style>
    .modal-container {
        display: flex;
        justify-content: center;
        align-items: flex-start; /* 모달이 상단에서 시작 */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        overflow: hidden;
    }

    .modal-content {
        background: white;
        max-height: 80vh;
        width: 60%;
        overflow-y: auto;
        padding: 20px; /* 내부 여백 추가 */
        margin-top: 10vh; /* 모달이 너무 위에 붙지 않도록 */
        border-radius: 10px;
        scroll-padding-top: 20px; /* 스크롤 시 여백 추가 */
    }

    .close-modal-btn {
        display: block;
        margin: 10px auto;
        padding: 10px 20px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    .close-modal-btn:hover {
        background: #0056b3;
    }
</style>
{% endblock %}

<body>
    <div class="modal-container" id="modalContainer">
        <div class="modal-content">
            {% if error_message %}
                <p>{{ error_message }}</p>
            {% else %}
                <p class="dateTitle">활동 날짜 | {{ selected_date }}<br><br></p>
                
                <div class="dateTitle">
                    <p>총 활동 시간 | {{ total_play_minutes }} 분 {{ total_play_seconds }} 초</p>
                </div>
                <br>
                <strong>      <인지 게임></strong>
                
                <!-- Table for other game records -->
                <table>
                    <thead>
                        <tr>
                            <th>시작 시간</th>
                            <th>게임 이름</th>
                            <th>게임 유형</th>
                            <th>점수</th>
                            <th>오답</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for game in game_records %}
                            {% if game.game_type != 4 %}
                                <tr>
                                    <td>{{ game.start_time|date:"Y-m-d H:i" }}</td>
                                    <td>{{ game.game_name }}</td>
                                    <td>
                                        {% if game.game_type == 0 %}
                                            터치 게임
                                        {% elif game.game_type == 1 %}
                                            모션 게임
                                        {% elif game.game_type == 2 %}
                                            발판 게임
                                        {% else %}
                                            알 수 없음
                                        {% endif %}
                                    </td>
                                    <td>{{ game.correct_score }}점</td>
                                    <td>
                                        {% if game.game_type != 1 %}
                                            {% if game.fail_score == 999 %}
                                                없습니다
                                            {% else %}
                                                {{ game.fail_score }}점
                                            {% endif %}
                                        {% endif %}
                                    </td>
                                </tr>
                            {% endif %}
                        {% empty %}
                            <tr>
                                <td colspan="6">기록이 없습니다.</td>
                            </tr>
                        {% endfor %}
                    </tbody>                        
                </table>
                <br>
            {% endif %}
            <button class="close-modal-btn" onclick="closeModal()">닫기</button>
        </div>
    </div>

    <script src="{% static 'smartmirror.js' %}"></script>
</body>
